{
  "data-exhaust": {
    "search": {
      "type": "azure"
    },
    "model": "org.ekstep.analytics.model.DataExhaustJobModel",
    "parallelization": 8,
    "appName": "Data Exhaust",
    "deviceMapping": false,
    "modelParams": {
      "shouldDelay": true,
      "delayInMilis": 1800000
    },
    "exhaustConfig": {
      "eks-consumption-raw": {
        "events": [
          "eks-consumption-raw"
        ],
        "eventConfig": {
          "eks-consumption-raw": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "channel/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "tags",
                "operator": "IN"
              },
              "channel": {
                "name": "context.channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "context.pdata.id",
                "operator": "EQ"
              }
            }
          }
        }
      },
      "eks-consumption-summary": {
        "events": [
          "ME_SESSION_SUMMARY",
          "ME_CONTENT_USAGE_SUMMARY",
          "ME_GENIE_LAUNCH_SUMMARY",
          "ME_ITEM_SUMMARY",
          "ME_GENIE_USAGE_SUMMARY",
          "ME_ITEM_USAGE_SUMMARY",
          "ME_ASSET_SNAPSHOT_SUMMARY",
          "ME_CONTENT_SNAPSHOT_SUMMARY",
          "ME_DEVICE_USAGE_SUMMARY",
          "ME_GENIE_SESSION_SUMMARY",
          "ME_WORKFLOW_SUMMARY"
        ],
        "eventConfig": {
          "ME_WORKFLOW_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/wfs/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "genieTag",
                "operator": "IN"
              },
              "channel": {
                "name": "dimensions.channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            }
          },
          "ME_SESSION_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/ss/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "genieTag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "context.granularity": {
                  "hidden": true
                },
                "edata.eks.timeSpent": {
                  "to": "Time spent on the content"
                },
                "edata.eks.screenSummary": {
                  "hidden": true
                },
                "edata.eks.currentLevel": {
                  "to": "Current Domain Level"
                },
                "edata.eks.syncDate": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Sync Date(IST)"
                },
                "edata.eks.timeDiff": {
                  "hidden": true
                },
                "context.date_range.from": {
                  "hidden": true
                },
                "edata.eks.start_time": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Content Start Time(IST)"
                },
                "uid": {
                  "to": "Genie User ID"
                },
                "ets": {
                  "hidden": true
                },
                "dimensions.group_user": {
                  "to": "Is Group User"
                },
                "edata.eks.activitySummary": {
                  "to": "Activity Summary"
                },
                "edata.eks.end_time": {
                  "hidden": true
                },
                "edata.eks.eventsSummary": {
                  "hidden": true
                },
                "eid": {
                  "hidden": true
                },
                "ver": {
                  "hidden": true
                },
                "edata.eks.levels": {
                  "hidden": true
                },
                "context.pdata.id": {
                  "hidden": true
                },
                "edata.eks.itemResponses": {
                  "to": "edata.eks.itemResponses"
                },
                "dimensions.gdata.id": {
                  "to": "Content ID"
                },
                "edata.eks.noOfLevelTransitions": {
                  "to": "Number of Level Transitions"
                },
                "edata.eks.noOfAttempts": {
                  "to": "Number of Attempts"
                },
                "tags": {
                  "to": "Genie Tags"
                },
                "edata.eks.interruptTime": {
                  "to": "Total interrupt time"
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Sync time stamp(IST)"
                },
                "edata.eks.mimeType": {
                  "hidden": true
                },
                "edata.eks.telemetryVersion": {
                  "to": "Telemetry Version"
                },
                "context.pdata.ver": {
                  "hidden": true
                },
                "dimensions.gdata.ver": {
                  "hidden": true
                },
                "edata.eks.interactEventsPerMin": {
                  "to": "Number of interactions per minute"
                },
                "edata.eks.contentType": {
                  "to": "Content Type"
                },
                "context.pdata.model": {
                  "hidden": true
                },
                "dimensions.anonymous_user": {
                  "to": "Logged in User"
                },
                "dimensions.did": {
                  "to": "Device ID"
                },
                "dimensions.loc": {
                  "to": "Lat / Long"
                },
                "mid": {
                  "to": "Session ID"
                },
                "edata.eks.noOfInteractEvents": {
                  "to": "Number of Interact events in the content session"
                },
                "context.date_range.to": {
                  "hidden": true
                }
              }
            }
          },
          "ME_CONTENT_USAGE_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/cus/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "genieTag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": false,
              "columnMappings": {}
            }
          },
          "ME_GENIE_LAUNCH_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/gls/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "genieTag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": false,
              "columnMappings": {}
            }
          },
          "ME_ITEM_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/is/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "genieTag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": false,
              "columnMappings": {}
            }
          },
          "ME_GENIE_USAGE_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/genie-launch-summ/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "genieTag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "context.granularity": {
                  "hidden": true
                },
                "context.date_range.from": {
                  "hidden": true
                },
                "uid": {
                  "to": "UIDs"
                },
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation time(IST)"
                },
                "edata.eks.total_ts": {
                  "to": "Total time (secs) per tag for the period"
                },
                "eid": {
                  "hidden": true
                },
                "ver": {
                  "hidden": true
                },
                "edata.eks.contents": {
                  "to": "Update col header\tContent IDs of all contents used per tag for the period"
                },
                "context.pdata.id": {
                  "hidden": true
                },
                "edata.eks.avg_ts_session": {
                  "to": "Average time spent per Genie session"
                },
                "edata.eks.device_ids": {
                  "to": "Device IDs per tag for the period"
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Sync time(IST)"
                },
                "context.pdata.ver": {
                  "hidden": true
                },
                "context.pdata.model": {
                  "hidden": true
                },
                "dimensions.tag": {
                  "to": "Tag name"
                },
                "edata.eks.total_sessions": {
                  "to": "Total number of sessions per tag for the period"
                },
                "mid": {
                  "to": "Unique Genie Session ID"
                },
                "context.date_range.to": {
                  "hidden": true
                },
                "dimensions.period": {
                  "to": "period"
                }
              }
            }
          },
          "ME_ITEM_USAGE_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/item-usage-summ/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "genieTag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": false,
              "columnMappings": {}
            }
          },
          "ME_ASSET_SNAPSHOT_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/asset-snapshot/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "genieTag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "context.granularity": {
                  "hidden": true
                },
                "edata.eks.used_activities_count": {
                  "to": "No. of activities that are part of lessons"
                },
                "edata.eks.used_templates_count": {
                  "to": "No. of templates that are part of lessons"
                },
                "context.date_range.from": {
                  "hidden": true
                },
                "uid": {
                  "to": "uid"
                },
                "edata.eks.total_questions_count": {
                  "to": "Total number of questions"
                },
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Generation Time(IST)"
                },
                "edata.eks.used_audio_count": {
                  "to": "No. of audio files that are being used"
                },
                "edata.eks.used_images_count": {
                  "to": "No. of images that are being used"
                },
                "edata.eks.used_questions_count": {
                  "to": "No. of questions that are being used"
                },
                "edata.eks.total_activities_count": {
                  "to": "Total number of activities"
                },
                "eid": {
                  "hidden": true
                },
                "ver": {
                  "hidden": true
                },
                "context.pdata.id": {
                  "hidden": true
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Sync time(IST)"
                },
                "edata.eks.total_templates_count": {
                  "to": "Total no. of templates"
                },
                "dimensions.partner_id": {
                  "to": "Partner ID"
                },
                "context.pdata.ver": {
                  "hidden": true
                },
                "edata.eks.total_images_count": {
                  "to": "Total no. of images"
                },
                "context.pdata.model": {
                  "hidden": true
                },
                "edata.eks.total_audio_count": {
                  "to": "Total no. of audio files"
                },
                "mid": {
                  "hidden": true
                },
                "context.date_range.to": {
                  "hidden": true
                }
              }
            }
          },
          "ME_CONTENT_SNAPSHOT_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/content-snapshot/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "genieTag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "context.granularity": {
                  "hidden": true
                },
                "context.date_range.from": {
                  "hidden": true
                },
                "edata.eks.active_user_count": {
                  "to": "No. of active authors on the portal"
                },
                "uid": {
                  "to": "uid"
                },
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation time(IST)"
                },
                "dimensions.author_id": {
                  "to": "Author ID"
                },
                "edata.eks.total_user_count": {
                  "to": "Total number of registered authors on the portal"
                },
                "edata.eks.live_content_count": {
                  "to": "Total number of content pieces live"
                },
                "eid": {
                  "hidden": true
                },
                "ver": {
                  "hidden": true
                },
                "context.pdata.id": {
                  "hidden": true
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Sync time(IST)"
                },
                "edata.eks.total_content_count": {
                  "to": "Total number of content pieces"
                },
                "edata.eks.review_content_count": {
                  "to": "Total number of content pieces pending review"
                },
                "dimensions.partner_id": {
                  "to": "Partner ID"
                },
                "context.pdata.ver": {
                  "hidden": true
                },
                "context.pdata.model": {
                  "hidden": true
                },
                "mid": {
                  "hidden": true
                },
                "context.date_range.to": {
                  "hidden": true
                }
              }
            }
          },
          "ME_DEVICE_USAGE_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/dus/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "genieTag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "context.granularity": {
                  "hidden": true
                },
                "edata.eks.total_play_time": {
                  "to": "Total Play time on device"
                },
                "context.date_range.from": {
                  "hidden": true
                },
                "edata.eks.start_time": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Time stamp of first Genie installation on device(IST)"
                },
                "uid": {
                  "to": "uid"
                },
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation time(IST)"
                },
                "edata.eks.avg_num_launches": {
                  "to": "Average num. of Genie launches per day"
                },
                "edata.eks.num_contents": {
                  "to": "No. of content pieces available on device"
                },
                "edata.eks.play_start_time": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Time stamp when the device first started game play(IST)"
                },
                "edata.eks.end_time": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Time stamp when the device was last used(IST)"
                },
                "eid": {
                  "hidden": true
                },
                "edata.eks.num_days": {
                  "to": "Number of days since Genie installed before the timestamp indicating the last use"
                },
                "ver": {
                  "hidden": true
                },
                "context.pdata.id": {
                  "hidden": true
                },
                "edata.eks.mean_play_time": {
                  "to": "Average play time on device"
                },
                "edata.eks.mean_play_time_interval": {
                  "to": "Average time interval between game play on the device"
                },
                "edata.eks.last_played_on": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Time stamp when the device was last used for game play(IST)"
                },
                "edata.eks.avg_time": {
                  "to": "Average time on Genie per day"
                },
                "edata.eks.last_played_content": {
                  "to": "Last played content on device"
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Sync time(IST)"
                },
                "context.pdata.ver": {
                  "hidden": true
                },
                "context.pdata.model": {
                  "hidden": true
                },
                "dimensions.did": {
                  "to": "Device ID"
                },
                "edata.eks.num_sessions": {
                  "to": "Total number of sessions from the device"
                },
                "mid": {
                  "hidden": true
                },
                "context.date_range.to": {
                  "hidden": true
                }
              }
            }
          },
          "ME_GENIE_SESSION_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/cus/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "genieTag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "context.granularity": {
                  "hidden": true
                },
                "context.date_range.from": {
                  "hidden": true
                },
                "edata.eks.content": {
                  "to": "Content IDs of content used in Genie Session"
                },
                "edata.eks.timeSpent": {
                  "to": "Time spent on Genie Session\t"
                },
                "uid": {
                  "to": "uid"
                },
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation time(IST)"
                },
                "dimensions.group_user": {
                  "to": "Is Group user?"
                },
                "edata.eks.contentCount": {
                  "to": "Number of content pieces used"
                },
                "eid": {
                  "hidden": true
                },
                "ver": {
                  "hidden": true
                },
                "edata.eks.time_stamp": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Session End time stamp(IST)"
                },
                "context.pdata.id": {
                  "hidden": true
                },
                "tags": {
                  "to": "Genie tags"
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Sync time(IST)"
                },
                "context.pdata.ver": {
                  "hidden": true
                },
                "context.pdata.model": {
                  "hidden": true
                },
                "dimensions.anonymous_user": {
                  "to": "Logged in user?"
                },
                "dimensions.did": {
                  "to": "Device ID"
                },
                "mid": {
                  "to": "Unique Genie Session ID"
                },
                "context.date_range.to": {
                  "hidden": true
                }
              }
            }
          }
        }
      },
      "eks-consumption-metrics": {
        "events": [
          "ME_CONTENT_USAGE_METRICS",
          "ME_ITEM_USAGE_METRICS",
          "ME_GENIE_USAGE_METRICS",
          "ME_CONTENT_SNAPSHOT_METRICS",
          "ME_CONCEPT_SNAPSHOT_METRICS",
          "ME_ASSET_SNAPSHOT_METRICS"
        ],
        "eventConfig": {
          "ME_CONTENT_USAGE_METRICS": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "eks-consumption-metrics/me_content_usage_metrics/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "dimensions.tag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation Time(IST)"
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event sync time(IST)"
                },
                "eid": {
                  "hidden": true
                },
                "dimensions.period": {
                  "to": "Time period of the summary. For ex: Day or Week or Month represented by a number"
                },
                "dimensions.content_id": {
                  "to": "Content ID"
                },
                "dimensions.tag": {
                  "to": "tag"
                },
                "edata.eks.m_publish_date": {
                  "to": "Date when the content is published"
                },
                "edata.eks.m_total_ts": {
                  "to": "Total time spent"
                },
                "edata.eks.m_total_sessions": {
                  "to": "Total number of sessions"
                },
                "edata.eks.m_avg_ts_session": {
                  "to": "Average timespent per session"
                },
                "edata.eks.m_total_interactions": {
                  "to": "Total interactions count"
                },
                "edata.eks.m_avg_interactions_min": {
                  "to": "Average interactions per minute"
                },
                "edata.eks.m_total_devices": {
                  "to": "Total number of devices"
                },
                "edata.eks.m_avg_sess_device": {
                  "to": "Average sessions per device"
                }
              }
            }
          },
          "ME_ITEM_USAGE_METRICS": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "eks-consumption-metrics/me_item_usage_metrics/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "dimensions.tag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation Time(IST)"
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event sync time(IST)"
                },
                "eid": {
                  "hidden": true
                },
                "dimensions.period": {
                  "to": "Time period of the summary. For ex: Day or Week or Month represented by a number"
                },
                "dimensions.tag": {
                  "to": "tag"
                },
                "dimensions.content_id": {
                  "to": "Content ID"
                },
                "dimensions.item_id": {
                  "to": "item id"
                },
                "edata.eks.m_total_ts": {
                  "to": "Total time spent"
                },
                "edata.eks.m_total_count": {
                  "to": "Total response count"
                },
                "edata.eks.m_correct_res_count": {
                  "to": "Correct response count"
                },
                "edata.eks.m_inc_res_count": {
                  "to": "Incorrect response count"
                },
                "edata.eks.m_correct_res": {
                  "hidden": true
                },
                "edata.eks.m_incorrect_res": {
                  "hidden": true
                },
                "edata.eks.m_top5_incorrect_res": {
                  "to": "Top 5 Incorrect response"
                },
                "edata.eks.m_avg_ts": {
                  "to": "Average time spent"
                },
                "edata.eks.m_top5_misconception_res": {
                  "to": "Top 5 Misconception response"
                }
              }
            }
          },
          "ME_GENIE_USAGE_METRICS": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "eks-consumption-metrics/me_genie_usage_metrics/"
              }
            },
            "filterMapping": {
              "tags": {
                "name": "dimensions.tag",
                "operator": "IN"
              },
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation Time(IST)"
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event sync time(IST)"
                },
                "eid": {
                  "hidden": true
                },
                "dimensions.period": {
                  "to": "Time period of the summary. For ex: Day or Week or Month represented by a number"
                },
                "dimensions.tag": {
                  "to": "Device Tag"
                },
                "edata.eks.m_total_sessions": {
                  "to": "Total number of sessions"
                },
                "edata.eks.m_total_ts": {
                  "to": "Total time spent"
                },
                "edata.eks.m_avg_ts_session": {
                  "to": "Average sessions per device"
                },
                "edata.eks.m_contents": {
                  "hidden": true
                },
                "edata.eks.m_total_devices": {
                  "to": "Total number of devices"
                }
              }
            }
          },
          "ME_CONTENT_SNAPSHOT_METRICS": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "eks-consumption-metrics/me_content_snapshot_metrics/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            }
          },
          "ME_CONCEPT_SNAPSHOT_METRICS": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "eks-consumption-metrics/me_concept_snapshot_metrics/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            }
          },
          "ME_ASSET_SNAPSHOT_METRICS": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "eks-consumption-metrics/me_asset_snapshot_metrics/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            }
          }
        }
      },
      "eks-creation-raw": {
        "events": [
          "eks-creation-raw"
        ],
        "eventConfig": {
          "eks-creation-raw": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "unique/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "context.channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "context.pdata.id",
                "operator": "EQ"
              }
            }
          }
        }
      },
      "eks-creation-summary": {
        "events": [
          "ME_APP_SESSION_SUMMARY",
          "ME_CE_SESSION_SUMMARY",
          "ME_TEXTBOOK_SESSION_SUMMARY",
          "ME_APP_USAGE_SUMMARY",
          "ME_CE_USAGE_SUMMARY",
          "ME_TEXTBOOK_USAGE_SUMMARY",
          "ME_AUTHOR_USAGE_SUMMARY",
          "ME_PUBLISH_PIPELINE_SUMMARY"
        ],
        "eventConfig": {
          "ME_APP_SESSION_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/app-ss/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "context.granularity": {
                  "hidden": true
                },
                "edata.eks.interact_events_per_min": {
                  "to": "Average ineractions per minute"
                },
                "edata.eks.events_summary": {
                  "to": "edata.eks.events_summary"
                },
                "dimensions.app_id": {
                  "to": "Event Source"
                },
                "context.date_range.from": {
                  "hidden": true
                },
                "edata.eks.start_time": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Start Time(IST)"
                },
                "uid": {
                  "to": "User ID"
                },
                "edata.eks.page_summary": {
                  "to": "Pages visited Summary"
                },
                "ets": {
                  "hidden": true
                },
                "edata.eks.page_views_count": {
                  "to": "Total pageviews in Session"
                },
                "edata.eks.end_time": {
                  "hidden": true
                },
                "eid": {
                  "hidden": true
                },
                "ver": {
                  "hidden": true
                },
                "context.pdata.id": {
                  "hidden": true
                },
                "edata.eks.ce_visits": {
                  "to": "Number of Authoring tool visits"
                },
                "dimensions.sid": {
                  "to": "Session ID"
                },
                "edata.eks.time_diff": {
                  "to": "Session length "
                },
                "edata.eks.interact_events_count": {
                  "to": "Number of Interactions"
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Sync time(IST)"
                },
                "context.pdata.ver": {
                  "hidden": true
                },
                "context.pdata.model": {
                  "hidden": true
                },
                "edata.eks.time_spent": {
                  "to": "Session length"
                },
                "dimensions.anonymous_user": {
                  "to": "User Logged In"
                },
                "mid": {
                  "to": "mid"
                },
                "edata.eks.env_summary": {
                  "to": "Usage summary"
                },
                "edata.eks.first_visit": {
                  "to": "First Time Visitor"
                },
                "context.date_range.to": {
                  "hidden": true
                }
              }
            }
          },
          "ME_CE_SESSION_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/ce-ss/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": false,
              "columnMappings": {}
            }
          },
          "ME_TEXTBOOK_SESSION_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/textbook-ss/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": false,
              "columnMappings": {}
            }
          },
          "ME_APP_USAGE_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/app-usage/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "edata.eks.avg_ts_session": {
                  "to": "Average session duration per day"
                },
                "context.granularity": {
                  "to": "Granularity"
                },
                "edata.eks.anon_total_sessions": {
                  "to": "Time spent by non-registered users"
                },
                "edata.eks.unique_users": {
                  "to": "Unique users list"
                },
                "dimensions.app_id": {
                  "to": "Source"
                },
                "edata.eks.unique_users_count": {
                  "to": "Unique users count"
                },
                "context.date_range.from": {
                  "hidden": true
                },
                "edata.eks.total_pageviews_count": {
                  "to": "Total Page Views per day"
                },
                "uid": {
                  "to": "uid"
                },
                "edata.eks.ce_total_sessions": {
                  "to": "Number of sessions where creation happened"
                },
                "edata.eks.anon_avg_ts_session": {
                  "to": "Avg. session duration for non-registered users per day"
                },
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Generation Time(IST)"
                },
                "edata.eks.total_ts": {
                  "to": "Total time spent by visitors on Portal"
                },
                "edata.eks.ce_percent_sessions": {
                  "to": "Percentage of visitors creating content"
                },
                "dimensions.author_id": {
                  "to": "Author ID"
                },
                "eid": {
                  "hidden": true
                },
                "ver": {
                  "hidden": true
                },
                "context.pdata.id": {
                  "hidden": true
                },
                "edata.eks.new_user_count": {
                  "to": "Number of new users"
                },
                "syncts": {
                  "to": "Event sync time(IST)",
                  "mapFunc": "timestampToDateTime"
                },
                "edata.eks.percent_new_users_count": {
                  "to": "Percentage of new visitors per day"
                },
                "context.pdata.ver": {
                  "hidden": true
                },
                "context.pdata.model": {
                  "hidden": true
                },
                "edata.eks.avg_pageviews": {
                  "to": "Avg. pages per visit per day"
                },
                "edata.eks.total_sessions": {
                  "to": "Total number of sessions"
                },
                "edata.eks.anon_total_ts": {
                  "to": "Total time spent by non-registered users on Portal"
                },
                "mid": {
                  "hidden": true
                },
                "dimensions.period": {
                  "to": "dimensions.period"
                },
                "context.date_range.to": {
                  "hidden": true
                }
              }
            }
          },
          "ME_CE_USAGE_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/ce-usage/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": false,
              "columnMappings": {}
            }
          },
          "ME_TEXTBOOK_USAGE_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/textbook-usage/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": false,
              "columnMappings": {}
            }
          },
          "ME_AUTHOR_USAGE_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/author-usage-summary/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "uid": {
                  "to": "Author ID"
                },
                "mid": {
                  "hidden": true
                },
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation time(IST)"
                },
                "eid": {
                  "hidden": true
                },
                "ver": {
                  "hidden": true
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Sync time(IST)"
                },
                "context.pdata.id": {
                  "hidden": true
                },
                "context.pdata.ver": {
                  "hidden": true
                },
                "context.pdata.model": {
                  "hidden": true
                },
                "edata.eks.avg_ts_session": {
                  "to": "Total number of seesion per day"
                },
                "edata.eks.total_ts": {
                  "to": "Total time spent by author"
                },
                "edata.eks.ce_total_ts": {
                  "to": "Total time spent on content editor by author"
                },
                "edata.eks.total_sessions": {
                  "to": "No of sessions per Author"
                },
                "context.granularity": {
                  "hidden": true
                },
                "edata.eks.ce_percent_ts": {
                  "to": "Percentage of time spent browsing vs creating"
                },
                "edata.eks.ce_percent_sessions": {
                  "to": "Percentage of sessions in which users log into content editor"
                },
                "edata.eks.ce_total_visits": {
                  "to": "No of Content Editor visits per author"
                },
                "context.date_range.from": {
                  "hidden": true
                },
                "context.date_range.to": {
                  "hidden": true
                }
              }
            }
          },
          "ME_PUBLISH_PIPELINE_SUMMARY": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "derived/publish-pipeline-summ/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "context.granularity": {
                  "hidden": true
                },
                "context.date_range.from": {
                  "hidden": true
                },
                "uid": {
                  "hidden": true
                },
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation Time(IST)"
                },
                "eid": {
                  "hidden": true
                },
                "ver": {
                  "hidden": true
                },
                "context.pdata.id": {
                  "hidden": true
                },
                "edata.eks.publish_pipeline_summary": {
                  "to": "edata.eks.publish_pipeline_summary"
                },
                "syncts": {
                  "to": "Event sync time(IST)",
                  "mapFunc": "timestampToDateTime"
                },
                "context.pdata.ver": {
                  "hidden": true
                },
                "context.pdata.model": {
                  "hidden": true
                },
                "mid": {
                  "hidden": true
                },
                "dimensions.period": {
                  "to": "Date"
                },
                "context.date_range.to": {
                  "hidden": true
                }
              }
            }
          }
        }
      },
      "eks-creation-metrics": {
        "events": [
          "ME_APP_USAGE_METRICS",
          "ME_CE_USAGE_METRICS",
          "ME_TEXTBOOK_CREATION_METRICS",
          "ME_TEXTBOOK_SNAPSHOT_METRICS",
          "ME_AUTHOR_USAGE_METRICS"
        ],
        "eventConfig": {
          "ME_APP_USAGE_METRICS": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "eks-creation-metrics/me_app_usage_metrics/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation Time(IST)"
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event sync time(IST)"
                },
                "eid": {
                  "hidden": true
                },
                "dimensions.period": {
                  "to": "Time period of the summary. For ex: Day or Week or Month represented by a number"
                },
                "dimensions.author_id": {
                  "to": "Author ID / All"
                },
                "dimensions.app_id": {
                  "to": "App (EkStep portal currently)"
                },
                "edata.eks.anon_total_sessions": {
                  "to": "Total anonymous sessions on portal"
                },
                "edata.eks.anon_total_ts": {
                  "to": "Tota time spent (Anonymous) on portal"
                },
                "edata.eks.total_sessions": {
                  "to": "Total number of portal sessions"
                },
                "edata.eks.total_ts": {
                  "to": "Total time spent on portal"
                },
                "edata.eks.ce_total_sessions": {
                  "to": "Total content editor sessions"
                },
                "edata.eks.ce_percent_sessions": {
                  "to": "% of total sessions that are content editor sessions"
                },
                "edata.eks.total_pageviews_count": {
                  "to": "Total pageviews on portal"
                },
                "edata.eks.unique_users": {
                  "hidden": true
                },
                "edata.eks.unique_users_count": {
                  "to": "Count of unique users on portal"
                },
                "edata.eks.avg_pageviews": {
                  "to": "Avg. number of pageviews per session for specified period"
                },
                "edata.eks.avg_ts_session": {
                  "to": "Avg. session length (time spent) per session for specified period"
                },
                "edata.eks.anon_avg_ts_session": {
                  "to": "Avg. Anonymous session length (time spent) per session for specified period"
                },
                "edata.eks.new_user_count": {
                  "to": "No. of new users on the app (portal) for the given time period"
                },
                "edata.eks.percent_new_users_count": {
                  "to": "% of new users for the given time period"
                }
              }
            }
          },
          "ME_CE_USAGE_METRICS": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "eks-creation-metrics/me_ce_usage_metrics/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation Time(IST)"
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event sync time(IST)"
                },
                "eid": {
                  "hidden": true
                },
                "dimensions.period": {
                  "to": "Time period of the summary. For ex: Day or Week or Month represented by a number"
                },
                "dimensions.content_id": {
                  "to": "Content ID"
                },
                "edata.eks.unique_users_count": {
                  "to": "Number of users who accessed the content piece via the editor"
                },
                "edata.eks.total_sessions": {
                  "to": "Total number of sessions that accessed the content piece via the editor"
                },
                "edata.eks.total_ts": {
                  "to": "Time spent on the content piece in the content editor"
                },
                "edata.eks.avg_ts_session": {
                  "to": "Average session time on the editor"
                },
                "edata.eks.update_date": {
                  "to": "Last updated timestamp of the content piece"
                }
              }
            }
          },
          "ME_TEXTBOOK_CREATION_METRICS": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "eks-creation-metrics/me_textbook_creation_metrics/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            }
          },
          "ME_TEXTBOOK_SNAPSHOT_METRICS": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "eks-creation-metrics/me_textbook_snapshot_metrics/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            }
          },
          "ME_AUTHOR_USAGE_METRICS": {
            "searchType": "azure",
            "fetchConfig": {
              "params": {
                "bucket": "{{ bucket }}",
                "prefix": "eks-creation-metrics/me_author_usage_metrics/"
              }
            },
            "filterMapping": {
              "channel": {
                "name": "channel",
                "operator": "EQ"
              },
              "app_id": {
                "name": "dimensions.pdata.id",
                "operator": "EQ"
              }
            },
            "csvConfig": {
              "auto_extract_column_names": true,
              "columnMappings": {
                "ets": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event generation Time(IST)"
                },
                "syncts": {
                  "mapFunc": "timestampToDateTime",
                  "to": "Event sync time(IST)"
                },
                "eid": {
                  "hidden": true
                },
                "dimensions.period": {
                  "to": " Time period of the summary. For ex: Day or Week or Month represented by a number"
                },
                "dimensions.author_id": {
                  "to": "Author ID /All"
                },
                "edata.eks.total_sessions": {
                  "to": "Total number of portal sessions by author"
                },
                "edata.eks.total_ts": {
                  "to": "Total time spent on portal by author"
                },
                "edata.eks.total_ce_ts": {
                  "to": "Total time spent on content editor by author"
                },
                "edata.eks.total_ce_visit": {
                  "to": "Number of content editor visits"
                },
                "edata.eks.percent_ce_sessions": {
                  "to": "% of sessions that were spent on the editor"
                },
                "edata.eks.avg_ts_session": {
                  "to": "Average time spent by author on portal per session"
                },
                "edata.eks.percent_ce_ts": {
                  "to": "% time spent by author on content editor"
                }
              }
            }
          }
        }
      }
    }
  },
  "wfs": {
    "search": {
      "type": "azure",
      "queries": [
        {
          "bucket": "{{ bucket }}",
          "prefix": "unique/raw/",
          "endDate": "$(date --date yesterday '+%Y-%m-%d')",
          "delta": 0
        }
      ]
    },
    "filters": [
      {
        "name": "actor",
        "operator": "ISNOTNULL"
      }  
    ],
    "model": "org.ekstep.analytics.model.WorkflowSummary",
    "modelParams": {
      "apiVersion": "v2",
      "parallelization": 32
    },
    "output": [
      {
        "to": "azure",
        "params": {
          "bucket": "{{ bucket }}",
          "key": "{{ job_manager_tmp_dir }}/wfs/$(date --date yesterday '+%Y-%m-%d')"
        }
      },
      {
        "to": "kafka",
        "params": {
          "brokerList": "{{ brokerlist }}",
          "topic": "{{ topic }}"
        }
      }
    ],
    "parallelization": 32,
    "appName": "Workflow Summarizer",
    "deviceMapping": true
  },
  "wfus": {
    "search": {
      "type": "azure",
      "queries": [
        {
          "bucket": "{{ bucket }}",
          "prefix": "{{ job_manager_tmp_dir }}/wfs/",
          "endDate": "$(date --date yesterday '+%Y-%m-%d')",
          "delta": 0,
          "folder": "true"
        }
      ]
    },
    "model": "org.ekstep.analytics.model.WorkflowUsageSummary",
    "modelParams": {
      "apiVersion": "v2"
    },
    "output": [
      {
        "to": "azure",
        "params": {
          "bucket": "{{ bucket }}",
          "key": "{{ job_manager_tmp_dir }}/wfus/$(date --date yesterday '+%Y-%m-%d')"
        }
      },
      {
        "to": "kafka",
        "params": {
          "brokerList": "{{ brokerlist }}",
          "topic": "{{ topic }}"
        }
      }
    ],
    "parallelization": 8,
    "appName": "Workflow Usage Summarizer",
    "deviceMapping": true
  },
  "wfu": {
    "search": {
      "type": "azure",
      "queries": [
        {
          "bucket": "{{ bucket }}",
          "prefix": "{{ job_manager_tmp_dir }}/wfus/",
          "endDate": "$(date --date yesterday '+%Y-%m-%d')",
          "delta": 0,
          "folder": "true"
        }
      ]
    },
    "appName": "Workflow Usage Updater",
    "parallelization": 8,
    "model": "org.ekstep.analytics.updater.UpdateWorkFlowUsageDB",
    "modelParams": {},
    "output": [
      {
        "to": "console",
        "params": {
          "printEvent": false
        }
      }
    ]
  },
  "ds": {
    "search": {
      "type": "azure",
      "queries": [
        {
          "bucket": "{{ bucket }}",
          "prefix": "unique/",
          "endDate": "$(date --date yesterday '+%Y-%m-%d')",
          "delta": 0
        },
        {
          "bucket": "{{ bucket }}",
          "prefix": "{{ job_manager_tmp_dir }}/wfs/",
          "endDate": "$(date --date yesterday '+%Y-%m-%d')",
          "delta": 0,
          "folder": "true"
        }
      ]
    },
    "model": "org.ekstep.analytics.model.DeviceSummaryModel",
    "modelParams": {
      "apiVersion": "v2"
    },
    "output": [
      {
        "to": "azure",
        "params": {
          "bucket": "{{ bucket }}",
          "key": "{{ job_manager_tmp_dir }}/device-summary/$(date --date yesterday '+%Y-%m-%d')"
        }
      },
      {
        "to": "kafka",
        "params": {
          "brokerList": "{{ brokerlist }}",
          "topic": "{{ topic }}"
        }
      }
    ],
    "parallelization": 12,
    "appName": "Device Summarizer",
    "deviceMapping": false
  },
  "dpu": {
    "search": {
      "type": "azure",
      "queries": [
        {
          "bucket": "{{ bucket }}",
          "prefix": "{{ job_manager_tmp_dir }}/device-summary/",
          "endDate": "$(date --date yesterday '+%Y-%m-%d')",
          "delta": 0,
          "folder": "true"
        }
      ]
    },
    "model": "org.ekstep.analytics.model.UpdateDeviceProfileDB",
    "modelParams": {
      "apiVersion": "v2"
    },
    "output": [
      {
        "to": "console",
        "params": {
          "printEvent": false
        }
      }
    ],
    "parallelization": 8,
    "appName": "Device Profile Updater",
    "deviceMapping": false
  },
  "workflow-usage-metrics": {
    "search": {
      "type": "azure",
      "queries": [
        {
          "bucket": "{{ bucket }}",
          "prefix": "{{ job_manager_tmp_dir }}/wfus/",
          "endDate": "$(date --date yesterday '+%Y-%m-%d')",
          "delta": 0,
          "folder": "true"
        }
      ]
    },
    "model": "org.ekstep.analytics.updater.UpdateWorkFlowUsageMetricsMode",
    "output": [
      {
        "to": "console",
        "params": {
          "printEvent": false
        }
      }
    ],
    "parallelization": 10,
    "appName": "Workflow Usage Metrics Updater",
    "deviceMapping": false
  },
  "video-streaming": {
    "search": {
      "type": "azure"
    },
    "model": "org.ekstep.analytics.job.VideoStreamingJob",
    "modelParams": {
      "maxIterations": 10
    },
    "output": [
      {
        "to": "console",
        "params": {
          "printEvent": false
        }
      }
    ],
    "parallelization": 8,
    "appName": "Video Streaming Job",
    "deviceMapping": false
  },
  "course-dashboard-metrics": {
    "search": {
      "type": "none"
    },
    "model": "org.ekstep.analytics.updater.UpdateCourseMetricsV2",
    "modelParams": {
      "batchFilters": ["TPD"],
      "applyPrivacyPolicy": true,
      "contentFilters": {},
      "reportPath": "course-progress-reports/",
      "fromDate": "$(date --date yesterday '+%Y-%m-%d')",
      "toDate": "$(date --date yesterday '+%Y-%m-%d')",
      "sparkCassandraConnectionHost": "{{core_cassandra_host}}",
      "sparkElasticsearchConnectionHost": "{{sunbird_es_host}}",
      "sparkRedisConnectionHost": "{{metadata2_redis_host}}",
      "sparkUserDbRedisIndex": "12"
    },
    "output": [
      {
        "to": "console",
        "params": {
          "printEvent": false
        }
      }
    ],
    "parallelization": 8,
    "appName": "Course Dashboard Metrics",
    "deviceMapping": false
  },
  "assessment-dashboard-metrics": {
    "search": {
      "type": "none"
    },
    "model": "org.sunbird.analytics.job.report.AssessmentMetricsJobV2",
    "modelParams": {
      "batchFilters": ["TPD"],
      "applyPrivacyPolicy": true,
      "contentFilters": {},
      "reportPath": "assessment-reports/",
      "fromDate": "$(date --date yesterday '+%Y-%m-%d')",
      "toDate": "$(date --date yesterday '+%Y-%m-%d')",
      "sparkCassandraConnectionHost": "{{core_cassandra_host}}",
      "sparkElasticsearchConnectionHost": "{{sunbird_es_host}}",
      "sparkRedisConnectionHost": "{{metadata2_redis_host}}",
      "sparkUserDbRedisIndex": "12"
    },
    "output": [
      {
        "to": "console",
        "params": {
          "printEvent": false
        }
      }
    ],
    "parallelization": 8,
    "appName": "Assessment Dashboard Metrics",
    "deviceMapping": false
  },
  "admin-user-reports": {
    "search": {
      "type": "none"
    },
    "model": "org.ekstep.analytics.job.report.StateAdminReportJob",
    "modelParams": {
      "sparkCassandraConnectionHost": "{{core_cassandra_host}}",
      "sparkElasticsearchConnectionHost": "{{sunbird_es_host}}"
    },
    "output": [
      {
        "to": "console",
        "params": {
          "printEvent": false
        }
      }
    ],
    "parallelization": 8,
    "appName": "Admin User Reports",
    "deviceMapping": false
  },
  "admin-geo-reports": {
    "search": {
      "type": "none"
    },
    "model": "org.ekstep.analytics.job.report.StateAdminGeoReportJob",
    "modelParams": {
      "sparkCassandraConnectionHost": "{{core_cassandra_host}}",
      "sparkElasticsearchConnectionHost": "{{sunbird_es_host}}"
    },
    "output": [
      {
        "to": "console",
        "params": {
          "printEvent": false
        }
      }
    ],
    "parallelization": 8,
    "appName": "Admin Geo Reports",
    "deviceMapping": false
  },
  "content-rating-updater": {
    "search": {
      "type": "none"
    },
    "model": "org.ekstep.analytics.updater.UpdateContentRating",
    "modelParams": {
      "startDate": "$(date --date yesterday '+%Y-%m-%d')",
      "endDate": "$(date '+%Y-%m-%d')"
    },
    "output": [
      {
        "to": "kafka",
        "params": {
          "brokerList": "'$dockbrokerList'",
          "topic": "'$dockEnv'.mvc.processor.job.request" 
        }
      }
    ],
    "parallelization": 8,
    "appName": "Content Rating Updater",
    "deviceMapping": false
  },
  "monitor-job-summ": {
    "search": {
      "type": "local",
      "queries": [
        {
          "file": "{{ analytics.home }}/scripts/logs/joblog.log"
        }
      ]
    },
    "model": "org.ekstep.analytics.model.MonitorSummaryModel",
    "modelParams": {
      "pushMetrics": true,
      "brokerList": "{{ brokerlist }}",
      "topic": "{{ analytics_metrics_topic }}",
      "model": [
        {
          "model": "DeviceSummaryModel",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "UpdateDeviceProfileDB",
          "category": "consumption",
          "input_dependency": "DeviceSummaryModel"
        },
        {
          "model": "DataExhaustJob",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "UpdateWorkFlowUsageDB",
          "category": "consumption",
          "input_dependency": "WorkFlowUsageSummaryModel"
        },
        {
          "model": "WorkFlowSummaryModel",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "WorkFlowUsageSummaryModel",
          "category": "consumption",
          "input_dependency": "WorkFlowSummaryModel"
        },
        {
          "model": "UpdatePortalMetrics",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "UpdateWorkFlowUsageMetricsModel",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "CourseMetricsJob",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "UpdateContentRating",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "DruidQueryProcessingModel",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "DistrictMonthlyJob",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "DesktopConsumptionDailyMetricsJob",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "DistrictWeeklyJob",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "ConsumptionDailyMetricsJob",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "MetricsAuditJob",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "AssessmentMetricsJob",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "StateAdminReportJob",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "StateAdminGeoReportJob",
          "category": "consumption",
          "input_dependency": "None"
        },
        {
          "model": "CourseEnrollmentJob",
          "category": "consumption",
          "input_dependency": "None"
        }
      ]
    },
    "output": [
      {
        "to": "console",
        "params": {
          "printEvent": false
        }
      },
      {
        "to": "kafka",
        "params": {
          "brokerList": "{{ brokerlist }}",
          "topic": "{{ topic }}"
        }
      }
    ],
    "appName": "TestMonitorSummarizer",
    "deviceMapping": true
  },
  "experiment": {
    "search": {
      "type": "none"
    },
    "model": "org.ekstep.analytics.model.ExperimentDefinitionModel",
    "modelParams": {
      "sparkElasticsearchConnectionHost": "{{ lp_composite_search_host }}"
    },
    "output": [
      {
        "to": "elasticsearch",
        "params": {
          "index": "experiment"
        }
      }
    ],
    "parallelization": 8,
    "appName": "Experiment-Definition",
    "deviceMapping": false
  },
  "etb-metrics": {
  	"search": {
  		"type": "none"
  	},
  	"model": "org.ekstep.analytics.model.report.ETBMetricsJob",
  	"modelParams": {
  		"reportConfig": {
  			"id": "etb_metrics",
  			"metrics": [],
  			"labels": {
  				"date": "Date",
  				"identifier": "TextBook ID",
  				"name": "TextBook Name",
  				"medium": "Medium",
  				"gradeLevel": "Grade",
  				"subject": "Subject",
  				"createdOn": "Created On",
  				"lastUpdatedOn": "Last Updated On",
  				"totalQRCodes": "Total number of QR codes",
  				"contentLinkedQR": "Number of QR codes with atleast 1 linked content",
  				"withoutContentQR": "Number of QR codes with no linked content",
  				"withoutContentT1": "Term 1 QR Codes with no linked content",
  				"withoutContentT2": "Term 2 QR Codes with no linked content",
  				"status": "Status",
  				"totalContentLinked": "Total content linked",
  				"totalQRLinked": "Total QR codes linked to content",
  				"totalQRNotLinked": "Total number of QR codes with no linked content",
  				"leafNodesCount": "Total number of leaf nodes",
  				"leafNodeUnlinked": "Number of leaf nodes with no content",
  				"l1Name": "Level 1 Name",
  				"l2Name": "Level 2 Name",
  				"l3Name": "Level 3 Name",
  				"l4Name": "Level 4 Name",
  				"l5Name": "Level 5 Name",
  				"dialcode": "QR Code",
  				"sum(scans)": "Total Scans",
  				"noOfContent": "Number of contents",
  				"nodeType": "Type of Node",
  				"term": "Term"
  			},
  			"output": [{
  				"type": "csv",
  				"dims": ["identifier", "channel", "name"],
  				"fileParameters": ["id", "dims"]
  			}],
  			"mergeConfig": {
  				"frequency": "WEEK",
  				"basePath": "{{ spark_output_temp_dir }}",
  				"rollup": 0,
  				"reportPath": "dialcode_counts.csv",
          "postContainer":"{{ reports_container }}"
  			}
  		},
  		"dialcodeReportConfig": {
  				"id": "etb_metrics",
  				"metrics": [],
  				"labels": {},
  				"output": [{
  					"type": "csv",
  					"dims": ["identifier", "channel", "name"],
  					"fileParameters": ["id", "dims"]
  				}],
  				"mergeConfig": {
  					"frequency": "WEEK",
  					"basePath": "{{ spark_output_temp_dir }}",
  					"rollup": 1,
  					"reportPath": "dialcode_counts.csv",
  					"rollupAge": "ACADEMIC_YEAR",
  					"rollupCol": "Date",
  					"rollupRange": 10,
            "postContainer":"{{ reports_container }}"
  				}
  		},
  		"etbFileConfig": {
  			"bucket": "{{ reports_container }}",
  			"file": "dialcode_scans/dialcode_counts.csv"
  		},
  		"druidConfig": {"queryType": "groupBy","dataSource": "content-model-snapshot","intervals": "1901-01-01T00:00:00+00:00/2101-01-01T00:00:00+00:00","aggregations": [{"name": "count","type": "count"}],"dimensions": [{"fieldName": "channel","aliasName": "channel"},{"fieldName": "identifier","aliasName": "identifier","type": "Extraction","outputType": "STRING","extractionFn": [{"type": "javascript","fn": "function(str){return str == null ? null: str.split(\".\")[0]}"}]},{"fieldName": "name","aliasName": "name"},{"fieldName": "createdFor","aliasName": "createdFor"},{"fieldName": "createdOn","aliasName": "createdOn"},{"fieldName": "lastUpdatedOn","aliasName": "lastUpdatedOn"},{"fieldName": "board","aliasName": "board"},{"fieldName": "medium","aliasName": "medium"},{"fieldName": "gradeLevel","aliasName": "gradeLevel"},{"fieldName": "subject","aliasName": "subject"},{"fieldName": "status","aliasName": "status"}],"filters": [{"type": "equals","dimension": "contentType","value": "TextBook"},{"type": "in","dimension": "status","values": ["Live","Draft","Review"]}],"postAggregation": [],"descending": "false","limitSpec": {"type": "default","limit": 1000000,"columns": [{"dimension": "count","direction": "descending"}]}},
  		"tenantConfig": {
  			"tenantId": "",
  			"slugName": ""
  		},
  		"store": "azure",
  		"format": "csv",
  		"key": "druid-reports/",
  		"filePath": "druid-reports/",
  		"container": "{{ bucket }}",
  		"folderPrefix": ["slug", "reportName"]
  	},
  	"output": [{
  		"to": "console",
  		"params": {
  			"printEvent": false
  		}
  	}],
  	"parallelization": 8,
  	"appName": "ETB Metrics Model",
  	"deviceMapping": false
  },
  "course-enrollment-report":{
    "search": {
        "type": "none"
      },
      "model": "org.ekstep.analytics.model.report.CourseEnrollmentJob",
      "modelParams": {
        "reportConfig": {
          "id": "tpd_metrics",
          "metrics" : [],
          "labels": {
            "completionCount": "Completion Count",
            "status": "Status",
            "enrollmentCount": "Enrollment Count",
            "courseName": "Course Name",
            "batchName": "Batch Name"
          },
          "output": [{
            "type": "csv",
            "dims": []
          }]
        },
        "esConfig": {
        "request": {
                "filters":{
                    "objectType": ["Content"],
                    "contentType": ["Course"],
                    "identifier": [],
                    "status": ["Live"]
                },
                "limit": 10000
            }
        },
        "store": "azure",
        "format":"csv",
        "key": "druid-reports/",
        "filePath": "druid-reports/",
        "container": "{{ bucket }}",
        "folderPrefix": ["slug", "reportName"],
        "sparkCassandraConnectionHost":"{{core_cassandra_host}}",
        "sparkElasticsearchConnectionHost":"{{sunbird_es_host}}"
    },
    "output": [{
      "to": "console",
      "params": {
        "printEvent": false
      }
    }],
    "parallelization": 8,
    "appName": "TPD Course Enrollment Metrics Model",
    "deviceMapping": false
  },
  "course-consumption-report":{
    "search": {
      "type": "none"
    },
    "model": "org.ekstep.analytics.model.report.CourseConsumptionJob",
    "modelParams": {
      "esConfig": {
        "request": {
          "filters": {
            "objectType": ["Content"],
            "contentType": ["Course"],
            "identifier": [],
            "status": ["Live"]
          }
        }
      },
      "reportConfig": {
        "id": "tpd_metrics",
        "labels": {
          "date": "Date",
          "status": "Batch Status",
          "timespent": "Timespent in mins",
          "courseName": "Course Name",
          "batchName": "Batch Name"
        },
        "dateRange": {
          "staticInterval": "LastDay",
          "granularity": "all"
        },
        "metrics": [{
          "metric": "totalCoursePlays",
          "label": "Total Course Plays (in mins) ",
          "druidQuery": {
            "queryType": "groupBy",
            "dataSource": "summary-events",
            "intervals": "LastDay",
            "aggregations": [{
              "name": "sum__edata_time_spent",
              "type": "doubleSum",
              "fieldName": "edata_time_spent"
            }],
            "dimensions": [{
              "fieldName": "object_rollup_l1",
              "aliasName": "courseId"
            }, {
              "fieldName": "uid",
              "aliasName": "userId"
            }, {
              "fieldName": "context_cdata_id",
              "aliasName": "batchId"
            }],
            "filters": [{
              "type": "equals",
              "dimension": "eid",
              "value": "ME_WORKFLOW_SUMMARY"
            }, {
              "type": "in",
              "dimension": "dimensions_pdata_id",
              "values": ["{{ producer_env }}.app", "{{ producer_env }}.portal"]
            }, {
              "type": "equals",
              "dimension": "dimensions_type",
              "value": "content"
            }, {
              "type": "equals",
              "dimension": "dimensions_mode",
              "value": "play"
            }, {
              "type": "equals",
              "dimension": "context_cdata_type",
              "value": "batch"
            }],
            "postAggregation": [{
              "type": "arithmetic",
              "name": "timespent",
              "fields": {
                "leftField": "sum__edata_time_spent",
                "rightField": 60,
                "rightFieldType": "constant"
              },
              "fn": "/"
            }],
            "descending": "false"
          }
        }],
        "output": [{
          "type": "csv",
          "metrics": ["timespent"],
          "dims": []
        }],
        "queryType": "groupBy"
      },
      "store": "azure",
      "format":"csv",
      "key": "druid-reports/",
      "filePath": "druid-reports/",
      "container": "{{ bucket }}",
      "folderPrefix": ["slug", "reportName"],
      "sparkCassandraConnectionHost":"{{core_cassandra_host}}",
      "sparkElasticsearchConnectionHost":"{{sunbird_es_host}}"
    },
    "output": [{
      "to": "console",
      "params": {
        "printEvent": false
      }
    }],
    "parallelization": 8,
    "appName": "TPD Course Consumption Metrics Model",
    "deviceMapping": false
  },
  "textbook-progress-report": {
      "search": {
        "type": "none"
      },
      "model": "org.ekstep.analytics.model.report.TextBookProgressModel",
      "modelParams": {
        "reportConfig": {
          "id": "content_progress_metrics",
          "metrics": [],
          "labels": {
            "board": "Board",
            "medium": "Medium",
            "gradeLevel": "Grade",
            "subject": "Subject",
            "resourceType": "Content Type",
            "totalContent": "Total Contents",
            "live": "Live",
            "review": "Review",
            "draft": "Draft",
            "unlisted": "Limited Sharing",
            "application_ecml": "Created on Diksha",
            "video_youtube": "YouTube Content",
            "video_mp4": "Uploaded Videos",
            "application_pdf": "Text Content",
            "application_html": "Uploaded Interactive Content",
            "identifier": "Content ID",
            "creator": "Created By",
            "createdOn": "Creation Date",
            "lastPublishDate": "Last Publish Date",
            "status": "Status",
            "pkgVersion": "Number of times Published",
            "lastPublishedOn": "Pending in current status since",
            "pendingInCurrentStatus": "Pending in current status since"
          },
          "output": [{
              "type": "csv",
              "dims": []
            }],
          "mergeConfig": {
          "frequency": "WEEK",
          "basePath": "{{ spark_output_temp_dir }}",
          "rollup": 0,
          "reportPath": "content_progress_metrics.csv",
          "postContainer":"{{ reports_container }}"
        }
        },
        "filter": {
          "tenantId": "",
          "slugName": ""
        },
        "store": "azure",
        "format": "csv",
        "key": "druid-reports/",
        "filePath": "druid-reports/",
        "container": "{{ bucket }}",
        "folderPrefix": [
          "slug",
          "reportName"
        ],
        "sparkCassandraConnectionHost": "{{core_cassandra_host}}"
      },
      "output": [
        {
          "to": "console",
          "params": {
            "printEvent": false
          }
        }
      ],
      "parallelization": 8,
      "appName": "Textbook Progress Metrics Model",
      "deviceMapping": false
    },
  "audit-metrics-report": {
      "search": {
        "type": "none"
      },
      "model": "org.ekstep.analytics.model.MetricsAuditJob",
      "modelParams": {
        "auditConfig": [
          {
            "name": "denorm",
            "search": {
              "type": "azure",
              "queries": [
                {
                  "bucket": "{{ bucket }}",
                  "prefix": "telemetry-denormalized/raw/",
                  "startDate": "$(date --date yesterday '+%Y-%m-%d')",
                  "endDate": "$(date --date yesterday '+%Y-%m-%d')"
                }
              ]
            },
            "filters": [
              {
                "name": "flags.user_data_retrieved",
                "operator": "EQ",
                "value": true
              },
              {
                "name": "flags.content_data_retrieved",
                "operator": "EQ",
                "value": true
              },
              {
                "name": "flags.device_data_retrieved",
                "operator": "EQ",
                "value": true
              },
              {
                "name": "flags.dialcode_data_retrieved",
                "operator": "EQ",
                "value": true
              },
              {
                "name": "flags.collection_data_retrieved",
                "operator": "EQ",
                "value": true
              },
              {
                "name": "flags.derived_location_retrieved",
                "operator": "EQ",
                "value": true
              }
            ]
          },
          {
            "name": "failed",
            "search": {
              "type": "azure",
              "queries": [
                {
                  "bucket": "{{ bucket }}",
                  "prefix": "failed/",
                  "startDate": "$(date --date yesterday '+%Y-%m-%d')",
                  "endDate": "$(date --date yesterday '+%Y-%m-%d')"
                }
              ]
            }
          },
          {
            "name": "unique",
            "search": {
              "type": "azure",
              "queries": [
                {
                  "bucket": "{{ bucket }}",
                  "prefix": "unique/",
                  "startDate": "$(date --date yesterday '+%Y-%m-%d')",
                  "endDate": "$(date --date yesterday '+%Y-%m-%d')"
                }
              ]
            }
          },
          {
            "name": "raw",
            "search": {
              "type": "azure",
              "queries": [
                {
                  "bucket": "{{ bucket }}",
                  "prefix": "raw/",
                  "startDate": "$(date --date yesterday '+%Y-%m-%d')",
                  "endDate": "$(date --date yesterday '+%Y-%m-%d')"
                }
              ]
            }
          },
          {
            "name": "channel-raw",
            "search": {
              "type": "azure",
              "queries": [
                {
                  "folder": true,
                  "bucket": "{{ bucket }}",
                  "prefix": "channel/*/raw/",
                  "startDate": "$(date --date yesterday '+%Y-%m-%d')",
                  "endDate": "$(date --date yesterday '+%Y-%m-%d')*.json.gz"
                }
              ]
            }
          },
          {
            "name": "channel-summary",
            "search": {
              "type": "azure",
              "queries": [
                {
                  "folder": true,
                  "bucket": "{{ bucket }}",
                  "prefix": "channel/*/summary/",
                  "startDate": "$(date --date yesterday '+%Y-%m-%d')",
                  "endDate": "$(date --date yesterday '+%Y-%m-%d')*.json.gz"
                }
              ]
            }
          },
          {
            "name": "derived",
            "search": {
              "type": "azure",
              "queries": [
                {
                  "bucket": "{{ bucket }}",
                  "prefix": "derived/wfs/",
                  "startDate": "$(date --date yesterday '+%Y-%m-%d')",
                  "endDate": "$(date --date yesterday '+%Y-%m-%d')"
                }
              ]
            }
          },
          {
            "name": "telemetry-count",
            "search": {
              "type": "druid",
              "druidQuery": {
                "queryType": "timeSeries",
                "dataSource": "telemetry-events",
                "intervals": "LastDay",
                "aggregations": [
                  {
                    "name": "total_count",
                    "type": "count",
                    "fieldName": "count"
                  }
                ],
                "descending": "false"
              }
            }
          },
          {
            "name": "summary-count",
            "search": {
              "type": "druid",
              "druidQuery": {
                "queryType": "timeSeries",
                "dataSource": "summary-events",
                "intervals": "LastDay",
                "aggregations": [
                  {
                    "name": "total_count",
                    "type": "count",
                    "fieldName": "count"
                  }
                ],
                "descending": "false"
              }
            }
          }
        ]
      },
      "output": [
        {
          "to": "kafka",
          "params": {
            "brokerList": "{{ brokerlist }}",
            "topic": "{{ metrics_topic }}"
          }
        }
      ],
      "parallelization": 8,
      "appName": "Metrics Audit"
  }
}