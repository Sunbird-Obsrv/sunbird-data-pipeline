---
user: root
group: root 
slack_channel: "{{ monitor_alerts_slack_channel }}"
slack_user: Monit
slack_web_hook: "{{ dp_vault_monitor_alerts_slack_url }}"

#monit_logstash_ep:
  #  app_name: logstash
  #script_path: "/etc/init.d/logstash"
  #retry: 3

monit_logstash:
  app_name: logstash
  grep_string: logstash
  custom_start: systemctl start logstash.service
  custom_stop: systemctl stop logstash.service
  retry: 3
	  
monit_yarn_master:
  app_name: resourcemanager
  custom_start: /usr/local/hadoop/sbin/yarn-daemon.sh start resourcemanager
  custom_stop: /usr/local/hadoop/bin/kill_jobs.sh && sleep 10 && bash /usr/local/hadoop/sbin/yarn-daemon.sh stop resourcemanager
  retry: 3
  user: hduser
  group: hadoop

monit_yarn_slave:
  app_name: nodemanager
  custom_start: /usr/local/hadoop/sbin/yarn-daemon.sh start nodemanager
  timeout: 20
  custom_stop: /usr/local/hadoop/sbin/yarn-daemon.sh stop nodemanager
  user: hduser
  group: hadoop
  retry: 3

monit_kafka:
  app_name: kafka
  custom_start: "/usr/sbin/service kafka start"
  custom_stop: "/usr/sbin/service kafka stop"
  timeout: "30"
  retry: 3

monit_zookeeper:
  app_name: zookeeper
  custom_start: "/usr/sbin/service zookeeper start"
  custom_stop: "/usr/sbin/service zookeeper stop"
  timeout: "30"
  retry: 3

  #monit_logstash_ep:
    #app_name: logstash
    # custom_start: "/usr/sbin/service logstash start"
    #custom_stop: "/usr/sbin/service logstash stop"
    #retry: 3

monit_api-service:
  app_name: "api-service"
  script_path: "/home/analytics/sbin/api-service"
  pid_file: "/mount/data/analytics/api/analytics-api-1.0/RUNNING_PID"
  user: analytics
  timeout: "30"
  retry: 3

monit_channel-telemetry-backup:
  app_name: channel-telemetry-backup
  custom_start: /home/analytics/sbin/secor channel-telemetry-backup start
  custom_stop: /home/analytics/sbin/secor channel-telemetry-backup stop
  user: analytics
  pid_file: /home/analytics/sbin/channel-telemetry-backup.pid
  retry: 3

monit_derived-telemetry-backup:
  app_name: derived-telemetry-backup
  custom_start: /home/analytics/sbin/secor derived-telemetry-backup start
  custom_stop: /home/analytics/sbin/secor derived-telemetry-backup stop
  user: analytics
  pid_file: /home/analytics/sbin/derived-telemetry-backup.pid
  retry: 3

monit_raw-telemetry-backup:
  app_name: raw-telemetry-backup
  custom_start: /home/analytics/sbin/secor raw-telemetry-backup start
  custom_stop: /home/analytics/sbin/secor raw-telemetry-backup stop
  user: analytics
  pid_file: /home/analytics/sbin/raw-telemetry-backup.pid
  retry: 3

monit_learning-events-backup:
  app_name: learning-events-backup
  custom_start: /home/analytics/sbin/secor learning-events-backup start
  custom_stop: /home/analytics/sbin/secor learning-events-backup stop
  user: analytics
  pid_file: /home/analytics/sbin/learning-events-backup.pid
  retry: 3

monit_ingestion-telemetry-backup:
  app_name: ingestion-telemetry-backup
  custom_start: /home/analytics/sbin/secor ingestion-telemetry-backup start
  custom_stop: /home/analytics/sbin/secor ingestion-telemetry-backup stop
  user: analytics
  pid_file: /home/analytics/sbin/ingestion-telemetry-backup.pid
  retry: 3

monit_unique-telemetry-backup:
  app_name: unique-telemetry-backup
  custom_start: /home/analytics/sbin/secor unique-telemetry-backup start
  custom_stop: /home/analytics/sbin/secor unique-telemetry-backup stop
  user: analytics
  pid_file: /home/analytics/sbin/unique-telemetry-backup.pid
  retry: 3

monit_failed-telemetry-backup:
  app_name: failed-telemetry-backup
  custom_start: /home/analytics/sbin/secor failed-telemetry-backup start
  custom_stop: /home/analytics/sbin/secor failed-telemetry-backup stop
  user: analytics
  pid_file: /home/analytics/sbin/failed-telemetry-backup.pid
  retry: 3

monit_cassandra-dp:
  app_name: "cassandra"
  custom_start: /bin/systemctl start cassandra
  custom_stop: /bin/systemctl stop cassandra
  timeout: "30"
  retry: 3

monit_influxdb:
  app_name: influxdb
  grep_string: influxdb.conf
  custom_start: "/usr/sbin/service influxdb start"
  custom_stop: "/usr/sbin/service influxdb stop"
  timeout: "30"
  retry: 3

monit_influxdb-relay:
  app_name: influxdb-relay
  grep_string: influxdb-relay
  custom_start: "/usr/sbin/service influxdb-relay start"
  custom_stop: "/usr/sbin/service influxdb-relay stop"
  timeout: "30"
  retry: 3

monit_kibana:
  app_name: kibana
  grep_string: /usr/share/kibana/bin/
  custom_start: "/usr/sbin/service kibana start"
  custom_stop: "/usr/sbin/service kibana stop"
  timeout: "30"
  retry: 3
