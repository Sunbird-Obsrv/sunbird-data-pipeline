---
# defaults file for sunbird-monitoring
fullnameOverride: sunbird-monitoring
monitoring_stack:
  - prometheus-operator

namespace: monitoring
flink_namespace: flink-dev
env: dev
kubernetes_cluster_name: kubernetes-dp-{{ env }}

monitor_alerts_mail_from_email: "{{ alert_from_address }}"
monitor_alerts_mail_server_host: "{{ sendgrid_hostname }}" 
monitor_alerts_mail_server_port: 587
monitor_alerts_mail_server_username: "{{ SGUSER }}" 
monitor_alerts_mail_server_password: "{{ SGPASS }}" 
monitor_alerts_slack_url: 
monitor_alerts_slack_channel: 

default_critical_mailing_list: "{{ default_mailing_list }}"
default_fatal_mailing_list: "{{ default_mailing_list }}"
default_mailing_list: kaliraja.ramasamy@tarento.com, anandp@ilimi.in, manjunathd@ilimi.in

lp_process_exporter_team_mailing_list: "{{ default_mailing_list }}"
lp_process_exporter_team_mailing_list_critical: "{{ default_critical_mailing_list }}"
lp_process_exporter_team_mailing_list_fatal: "{{ default_fatal_mailing_list }}"
druid_team_mailing_list: "{{ default_mailing_list }}"
druid_team_mailing_list_critical: "{{ default_critical_mailing_list }}"
druid_team_mailing_list_fatal: "{{ default_fatal_mailing_list }}"
dp_process_exporter_team_mailing_list: "{{ default_mailing_list }}"
dp_process_exporter_team_mailing_list_critical: "{{ default_critical_mailing_list }}"
dp_process_exporter_team_mailing_list_fatal: "{{ default_fatal_mailing_list }}"
node_exporter_team_mailing_list: "{{ default_mailing_list }}"
node_exporter_team_mailing_list_critical: "{{ default_critical_mailing_list }}"
node_exporter_team_mailing_list_fatal: "{{ default_fatal_mailing_list }}"
elasticsearch_exporter_team_mailing_list: "{{ default_mailing_list }}"
elasticsearch_exporter_team_mailing_list_critical: "{{ default_critical_mailing_list }}"
elasticsearch_exporter_team_mailing_list_fatal: "{{ default_fatal_mailing_list }}"
blackbox_exporter_team_mailing_list: "{{ default_mailing_list }}"
blackbox_exporter_team_mailing_list_critical: "{{ default_critical_mailing_list }}"
blackbox_exporter_team_mailing_list_fatal: "{{ default_fatal_mailing_list }}"


alert_teams:
  - team: lp_process_exporter_team
    group: groupname
    alerts_mailing_list: "{{ lp_process_exporter_team_mailing_list }}"
    services:
      - tomcat_.*
      - search_.*
      - neo4j_.*
      - kafka_.*
      - zookeeper_.*
      - yarn_.*
      - redis-server.*
      - cassandra_.*
      - elasticsearch_.*
      - logstash_.*
    severity_mailing_filter: 
      - severity: critical
        alerts_mailing_list: "{{ lp_process_exporter_team_mailing_list_critical }}"
      - severity: fatal
        alerts_mailing_list: "{{ lp_process_exporter_team_mailing_list_fatal }}"
  - team: druid_process_exporter_team
    group: groupname
    alerts_mailing_list: "{{ druid_team_mailing_list }}"
    services:
      - druidzookeeper.*
      - druidpostgres.*
      - overlord.*
      - coordinator.*
      - historical.*
      - broker.*
      - middle-Manager.*
    severity_mailing_filter: 
      - severity: critical
        alerts_mailing_list: "{{ druid_team_mailing_list_critical }}"
      - severity: fatal
        alerts_mailing_list: "{{ druid_team_mailing_list_fatal }}"
  - team: dp_process_exporter_team
    group: groupname
    alerts_mailing_list: "{{ dp_process_exporter_team_mailing_list }}"
    services:
      - analytics.*
      - influx.*
      - secor.*
      - kafka_.*
      - zookeeper_.*
      - yarn_.*
    severity_mailing_filter: 
      - severity: critical
        alerts_mailing_list: "{{ dp_process_exporter_team_mailing_list_critical }}"
      - severity: fatal
        alerts_mailing_list: "{{ dp_process_exporter_team_mailing_list_fatal }}"
  - team: node_exporter_team
    group: job
    alerts_mailing_list: "{{ node_exporter_team_mailing_list }}"
    services:
      - .*node-exporter
    severity_mailing_filter: 
      - severity: critical
        alerts_mailing_list: "{{ node_exporter_team_mailing_list_critical }}"
      - severity: fatal
        alerts_mailing_list: "{{ node_exporter_team_mailing_list_fatal }}"
  - team: elasticsearch_exporter_team
    group: service
    alerts_mailing_list: "{{ elasticsearch_exporter_team_mailing_list }}"
    services:
      - .*elasticsearch-exporter
    severity_mailing_filter: 
      - severity: critical
        alerts_mailing_list: "{{ elasticsearch_exporter_team_mailing_list_critical }}"
      - severity: fatal
        alerts_mailing_list: "{{ elasticsearch_exporter_team_mailing_list_fatal }}"
  - team: blackbox_exporter_team
    group: service_name
    alerts_mailing_list: "{{ blackbox_exporter_team_mailing_list }}"
    services:
      - .*-service
    severity_mailing_filter: 
      - severity: critical
        alerts_mailing_list: "{{ blackbox_exporter_team_mailing_list_critical }}"
      - severity: fatal
        alerts_mailing_list: "{{ blackbox_exporter_team_mailing_list_fatal }}"
